/*
 * utils(v1.0)：Which stores the common methods used in our project, and is compatible with all browsers.
 * by team on 2015/08/25
 */
var utils={listToArray:function(a){var d,b=[];try{b=Array.prototype.slice.call(a,0)}catch(c){for(d=0;d<a.length;d++)b[d]=a[d]}return b},formatJSON:function(jsonStr){var jsonObj=null;try{jsonObj=JSON.parse(jsonStr)}catch(e){jsonObj=eval("("+jsonStr+")")}return jsonObj}};utils.getElementsByClass=function(a,b){var c,d,e,f,g,h,i,j,k;if(b=b||document,"getElementsByClassName"in document)return this.listToArray(b.getElementsByClassName(a));for(c=[],d=b.getElementsByTagName("*"),e=a.replace(/(^\s*|\s*$)/g,"").split(/\s+/),f=[],g=0;g<e.length;g++)f[f.length]=new RegExp("(?:^| +)"+e[g]+"(?: +|$)");for(g=0;g<d.length;g++){for(h=d[g],i=h.className,j=!0,k=0;k<f.length;k++)if(!f[k].test(i)){j=!1;break}j?c[c.length]=h:void 0}return c},utils.getChildren=function(a,b){var c,d,e,f,g,h;for(b=b||"",c=[],d=a.childNodes,e=0;e<d.length;e++)if(f=d[e],1===f.nodeType){if(""!==b){g=f.nodeName.toLowerCase(),h=b.toLowerCase(),g===h&&c.push(f);continue}c.push(f)}return c},utils.getPre=function(a){if(a.previousElementSibling)return a.previousElementSibling;for(var b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},utils.getNext=function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},utils.getSibling=function(a){var b=this.getPre(a),c=this.getNext(a),d=[];return b?d.push(b):void 0,c?d.push(c):void 0,d},utils.getPres=function(a){for(var b=[],c=this.getPre(a);c;)b.unshift(c),c=this.getPre(c);return b},utils.getNexts=function(a){for(var b=[],c=this.getNext(a);c;)b.push(c),c=this.getNext(c);return b},utils.getSiblings=function(a){return this.getPres(a).concat(this.getNexts(a))},utils.getIndex=function(a){return this.getPres(a).length},utils.getFirst=function(a,b){var c=this.getChildren(a,b);return c.length>0?c[0]:null},utils.getLast=function(a,b){var c=this.getChildren(a,b);return c.length>0?c[c.length-1]:null},utils.prepend=function(a,b){var c=this.getFirst(b);c?b.insertBefore(a,c):b.appendChild(a)},utils.insertAfter=function(a,b){var c=this.getNext(b),d=b.parentNode;c?d.insertBefore(a,c):d.appendChild(a)},utils.html=function(a,b){return"string"!=typeof b?a.innerHTML:(a.innerHTML=b,void 0)},utils.attr=function(a,b,c){return"undefined"==typeof c?a[b]:(a[b]=c,void 0)},utils.getWin=function(a){return document.documentElement[a]||document.body[a]},utils.offset=function(a){var b=a.offsetParent,c=0,d=0;for(c+=a.offsetTop,d+=a.offsetLeft;b;)c+=b.offsetTop,d+=b.offsetLeft,navigator.userAgent.indexOf("MSIE 8.0")<0&&(c+=b.clientTop,d+=b.clientLeft),b=b.offsetParent;return{top:c,left:d}},utils.hasClass=function(a,b){var c=new RegExp("(?:^| +)"+b+"(?: +|$)","g");return c.test(a.className)},utils.addClass=function(a,b){if(!this.hasClass(a,b)){var c=a.className;a.className+=""===c?b:" "+b}},utils.removeClass=function(a,b){if(this.hasClass(a,b)){var c=new RegExp("(?:^| +)"+b+"(?: +|$)","g");a.className=a.className.replace(c," ")}},utils.getCss=function(a,b){var d,c=null;return c="getComputedStyle"in window?window.getComputedStyle(a,null)[b]:a.currentStyle[b],d=/^(((margin|padding)?(top|left|bottom|right))|(width|height))$/i,d.test(b)&&-1===c.indexOf("%")?parseFloat(c):c},utils.setCss=function(a,b,c){var e,d=a.style;return"opacity"===b?(d["opacity"]=c,d["filter"]="alpha(opacity="+100*c+")",void 0):(e=/^(((margin|padding)?(top|left|bottom|right))|(width|height))$/i,e.test(b)?(d[b]=isNaN(c)?c:c+"px",void 0):(d[b]=c,void 0))},utils.setGroupCss=function(a,b){if("[object Object]"===Object.prototype.toString.call(b))for(var c in b)this.setCss(a,c,b[c])},~function(a){var d,b={isNum:"Number",isStr:"String",isBoo:"Boolean",isNul:"Null",isUnd:"Undefined",isObj:"Object",isAry:"Array",isFun:"Function",isReg:"RegExp"},c=function(){var a=arguments[0];return function(){var b=arguments[0],c=new RegExp("^\\[object "+a+"\\]$","i");return c.test(Object.prototype.toString.call(b))}};for(d in b)a[d]=c(b[d])}(utils),~function(){var b,c,a=Array.prototype;a.myDistinct=function(){var b,c,a={};for(b=0;b<this.length;b++)c=this[b],a[c]!=c?a[c]=c:(this[b]=this[this.length-1],this.length-=1,b--);a=null},a.myForEach=function(a,b){if(b=b||window,Array.prototype.forEach)this.forEach(a,b);else for(var c=0;c<this.length;c++)a.apply(b,[this[c],c,this])},a.myMap=function(a,b){var c,d;if(b=b||window,c=[],Array.prototype.map)c=this.map(a,b);else for(d=0;d<this.length;d++)c[d]=a.apply(b,[this[d],d,this]);return c},b=String.prototype,b.myTrim=function(){return this.replace(/(^\s*|\s*$)/g,"")},b.mySub=function(){var e,f,a=arguments[0]||10,b=arguments[1]||!1,c="",d=0;for(e=0;e<this.length;e++){if(f=this.charAt(e),/[\u4e00-\u9fa5]/.test(f)?d+=2:d++,d>a){b?c+="...":void 0;break}c+=f}return c},b.myFormatTime=function(){var c,a=/^(\d{4})(?:-|\/|\.|:)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})(?:\s+)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})(?:-|\/|\.|:)(\d{1,2})$/g,b=[];return this.replace(a,function(){b=[].slice.call(arguments).slice(1,7)}),c=arguments[0]||"{0}年{1}月{2}日 {3}:{4}:{5}",c.replace(/{(\d+)}/g,function(){var a=b[arguments[1]];return 1===a.length?"0"+a:a})},b.myQueryURLParameter=function(){var a=/([^?&=]+)=([^?&=]+)/g,b={};return this.replace(a,function(){b[arguments[1]]=arguments[2]}),b},c=Object.prototype,c.myHasPubProperty=function(){var a=arguments[0];return a in this&&!this.hasOwnProperty(a)}}();